var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,s=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;import{ap as o,w as i,e as l,y as c,v as r}from"./index.886dfe0f.js";import{g as d,T as g,a as u,P as m}from"./usePagination.3f5c0e2c.js";import"./index.83b32b72.js";import{h as p,i as f}from"./api.b5828984.js";import{e as h,a as b,H as v,d as y,r as w,o as C,c as x,g as S,B as j,N as M,D}from"./vendor.85ba868e.js";const P=[{title:"No.",dataIndex:"id",slots:{customRender:"id"}},{title:"Name",dataIndex:"name"},{title:"Message",dataIndex:"content",width:"50%"},{title:"Create Time",dataIndex:"createTime",slots:{customRender:"createTime"}},{title:"Action",dataIndex:"action",slots:{customRender:"action"}}];function z(){const e=h(!1),a=d(),t=h([]),n=b((()=>s.value.length>0)),s=h([]);v((()=>{r({pageNo:1,pageSize:10})}));function r(n){e.value=!0,s.value=[],p(n).then((n=>{n.success?(t.value=o(n.data.list),a.total=n.data.total):i(n.message),e.value=!1})).catch((a=>{e.value=!1,l(a.message)}))}return{loading:e,columns:P,pagination:a,msgList:t,selectedRowKeys:s,canDelete:n,onSelectChange:function(e){s.value=e},handlePageChange:function(e){const t=e.current,n=e.pageSize;a.current=t,a.pageSize=n,r({pageNo:t,pageSize:n})},handleDeleteMsg:function(e){const t=[];null===e?t.push(...s.value):t.push(e.id),f({ids:t}).then((e=>{e.success?(c(e.message),r({pageNo:a.current,pageSize:a.pageSize})):i(e.message)})).catch((e=>{l(e.message)}))}}}var I=y({name:"Message",components:{"a-table":g,"a-tag":u,"a-button":r,"pop-confirm":m},setup:()=>((e,o)=>{for(var i in o||(o={}))a.call(o,i)&&s(e,i,o[i]);if(t)for(var i of t(o))n.call(o,i)&&s(e,i,o[i]);return e})({},z())});const N={class:"message-board scroller"},O=S("h3",{class:"primary-title mb-1"},[S("i",{class:"iconfont icon-flashing"}),M(" Message Management ")],-1),R={class:"mb-1",style:{"text-align":"right"}},T=M(" Multiple Delete "),k=S("i",{class:"iconfont icon-delete"},null,-1);I.render=function(e,a,t,n,s,o){const i=w("a-button"),l=w("pop-confirm"),c=w("a-table");return C(),x("section",N,[O,S("div",R,[S(i,{disabled:!e.canDelete,onClick:a[1]||(a[1]=a=>e.handleDeleteMsg(null))},{default:j((()=>[T])),_:1},8,["disabled"])]),S(c,{loading:e.loading,columns:e.columns,"row-key":e=>e.id,pagination:e.pagination,"data-source":e.msgList,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},onChange:e.handlePageChange},{id:j((({index:e})=>[M(D(e+1),1)])),action:j((({record:a})=>[S(l,{title:"Sure to delete ?",onConfirm:t=>e.handleDeleteMsg(a)},{default:j((()=>[k])),_:2},1032,["onConfirm"])])),_:1},8,["loading","columns","row-key","pagination","data-source","row-selection","onChange"])])};export default I;
