import{_ as s,c as n,o as a,b as p}from"./app.c28f4174.js";const A=JSON.parse('{"title":"打包工具对比","description":"","frontmatter":{"title":"打包工具对比"},"headers":[{"level":2,"title":"webpack vs rollup：","slug":"webpack-vs-rollup","link":"#webpack-vs-rollup","children":[]},{"level":2,"title":"webpack5 vs webpack4（以下简称 v5，v4）：","slug":"webpack5-vs-webpack4-以下简称-v5-v4","link":"#webpack5-vs-webpack4-以下简称-v5-v4","children":[]}],"relativePath":"knowledge/engineering/compare.md"}'),l={name:"knowledge/engineering/compare.md"},o=p(`<h2 id="webpack-vs-rollup" tabindex="-1"><code>webpack</code> vs <code>rollup</code>： <a class="header-anchor" href="#webpack-vs-rollup" aria-hidden="true">#</a></h2><p><code>webpack</code> 最初用于构建复杂的单页应用程序（SPA），特别是它的两个特性：<strong>代码拆分（Code Splitting）</strong>：可以将应用程序分解成可管理的代码块；<strong>静态资源导入（Static Assets）</strong>：如 <code>图片</code>、<code>CSS</code> 资源，我们无需关心它们是不是在正确的项目目录，也不用关心文件 URL 的 hash 值问题</p><ul><li><p><code>rollup</code> 是一个模块化打包工具，专门针对于类库打包，在打包时默认进行 <code>Tree-shaking</code>，所以打包后的文件体积相比 webpack 会小很多。它利用 <code>ES2015</code> 巧妙的模块设计，尽可能高效地构建出能够直接被其它 JavaScript 库引用的模块</p></li><li><p><code>rollup</code> 虽说可以通过插件机制处理大多数的 CommonJS 模块，但有些东西确实无法转换为 ES2015 语法，也不支持 HMR（热模块替换 / 热更新）；而 webpack 通过将模块封装成一个个函数的方式，可以处理任何你丢给它的东西</p></li></ul><h2 id="webpack5-vs-webpack4-以下简称-v5-v4" tabindex="-1"><code>webpack5</code> vs <code>webpack4</code>（以下简称 v5，v4）： <a class="header-anchor" href="#webpack5-vs-webpack4-以下简称-v5-v4" aria-hidden="true">#</a></h2><ul><li><p>新增 <code>Tree-shaking</code> 功能</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// webpack.config.js 配置开启</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">optimization</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">usedExports</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 只导出被使用的模块</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>由于 <code>CommonJS</code> 是动态导入，<code>Tree-shaking</code> 是只能工作在静态编译阶段的代码优化方案，因而只支持 <code>ES6 Module</code>，因而在 <code>babel-loader</code> 预设环境需要配置</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">presets</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-env</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">modules</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-react</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@babel/preset-typescript</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>modules: false</code> 将开启的 ESModule 模式 <a href="https://github.com/babel/babel-loader/issues/521" target="_blank" rel="noreferrer">内容描述可见 ➡️</a>，防止 <code>Babel</code> 将任何类型的模块都转换成 <code>CommonJS</code> 模块</p><p><code>webpack5</code> 的 <code>mode = &quot;production&quot;</code> 默认开启 <code>Tree-shaking</code> 功能</p></li><li><p>v5 默认内置 <code>terser-webpack-plugin</code> 插件进行代码压缩，且在 <code>mode = &quot;production&quot;</code> 的模式下默认开启；v4 则需要我们先安装此插件，再进行配置</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// webpack.config.js in v5</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">optimization</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">minimize </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 启动压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// webpack.config.js in v4</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> TerserPlugin </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">terser-webpack-plugin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">optimization</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">minimize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">isDev</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;">// 非开发环境开启压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">minimizer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TerserPlugin</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;">// 注释是否需要提取到一个单独的文件中</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F07178;">extractComments</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F07178;">terserOptions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#F07178;">compress</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">                        </span><span style="color:#676E95;">// 去除打印内容</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#F07178;">pure_funcs</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">console.log</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] </span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        ]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></li></ul>`,5),e=[o];function c(t,r,D,y,F,C){return a(),n("div",null,e)}const d=s(l,[["render",c]]);export{A as __pageData,d as default};
