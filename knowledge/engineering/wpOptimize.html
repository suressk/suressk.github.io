<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>åŸºäºæ„å»ºç­–ç•¥ä¼˜åŒ–åº”ç”¨æ‰“åŒ… | K.island âœ¨</title>
    <meta name="description" content="K.'s island">
    <link rel="stylesheet" href="/assets/style.019f39fc.css">
    <link rel="modulepreload" href="/assets/Home.46fd7584.js">
    <link rel="modulepreload" href="/assets/app.e07e89a0.js">
    <link rel="modulepreload" href="/assets/knowledge_engineering_wpOptimize.md.cc548111.lean.js">
    <link rel="modulepreload" href="/assets/app.e07e89a0.js">
    <link rel="icon" href="/favicon.ico" sizes="64x64">
    <link rel="apple-touch-icon-precomposed" href="/favicon.ico" sizes="64x64">
    <link rel="msapplication-square64x64logo" href="/favicon.ico" sizes="64x64">
    <meta name="twitter:title" content="åŸºäºæ„å»ºç­–ç•¥ä¼˜åŒ–åº”ç”¨æ‰“åŒ… | K.island âœ¨">
    <meta property="og:title" content="åŸºäºæ„å»ºç­–ç•¥ä¼˜åŒ–åº”ç”¨æ‰“åŒ… | K.island âœ¨">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="K.island âœ¨, back to home" data-v-675d8756 data-v-4a583abe><!----> K.island âœ¨</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/mood/index" data-v-b8818f8c>Mood <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/knowledge/index" data-v-b8818f8c>Knowledge <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/interview/index" data-v-b8818f8c>Interview <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/algorithm/index" data-v-b8818f8c>Algorithm <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/suressk" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>Home <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/mood/index" data-v-b8818f8c>Mood <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/knowledge/index" data-v-b8818f8c>Knowledge <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/interview/index" data-v-b8818f8c>Interview <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/algorithm/index" data-v-b8818f8c>Algorithm <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/suressk" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Introduction</p><!----></li><li class="sidebar-link"><p class="sidebar-link-item">Study Note</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/study/jsEventLoop">JS EventLoop</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/study/promise">Promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/study/vueNextTick">Vue NextTick</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/study/algorithm">Algorithm</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Vite</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/vite/index">Vite åŸç†ç®€ä»‹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/vite/vitejs">ä» vite åˆ° createServer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/vite/resolveConfig">resolveConfig</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/vite/esbuild">ä¾èµ–é¢„æ„å»º</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/vite/plugin">æ’ä»¶æœºåˆ¶</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">React</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/react/index">React ç¬”è®°æ–‡ç«  - æ˜é‡‘</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/react/fiber">React Fiber</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Engineering</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/engineering/webpack">webpack</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/engineering/loaderAndPlugin">webpack Loader &amp; plugin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/engineering/tapable">webpack Tapable</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/engineering/hotUpdate">webpack çƒ­æ›´æ–°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/engineering/compare">æ‰“åŒ…å·¥å…·å¯¹æ¯”</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/knowledge/engineering/lint">ä»£ç è§„èŒƒ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/knowledge/engineering/wpOptimize">webpack æ‰“åŒ…ä¼˜åŒ–</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#æ„å»ºç­–ç•¥">æ„å»ºç­–ç•¥</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å‡å°‘æ‰“åŒ…æ—¶é—´æ–¹æ¡ˆ">å‡å°‘æ‰“åŒ…æ—¶é—´æ–¹æ¡ˆ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å‡å°‘æ‰“åŒ…ä½“ç§¯æ–¹æ¡ˆ">å‡å°‘æ‰“åŒ…ä½“ç§¯æ–¹æ¡ˆ</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>åŠŸèƒ½å¼ºå¤§çš„ <code>webpack</code> é…ç½®ç¹å¤šï¼Œå¾ˆå¤šé…ç½®å­—æ®µé›¶é›¶æ•£æ•£åœ°åˆ†å¸ƒï¼Œå†åŠ ä¸Š <code>Loader</code> ä¸ <code>Plugin</code> çš„é…ç½®ï¼Œè¦è®© <code>webpack</code> æ‰“åŒ…æ—¶é—´æ›´çŸ­æ‰“åŒ…ä½“ç§¯æ›´å°è¿˜æ˜¯éœ€è¦åšä¸€äº›äº‹æƒ…çš„</p><h2 id="æ„å»ºç­–ç•¥" tabindex="-1">æ„å»ºç­–ç•¥ <a class="header-anchor" href="#æ„å»ºç­–ç•¥" aria-hidden="true">#</a></h2><p>å¯¹ <code>webpack</code> åšç›¸å…³æ„å»ºç­–ç•¥æ˜¯ä¸ºäº†è®©åº”ç”¨æ‰“åŒ…è¾¾åˆ° <code>æœ€ä¼˜åŒ–</code>ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åšå¥½ <code>webpack</code> çš„æ€§èƒ½ä¼˜åŒ–å·¥ä½œã€‚é‚£ä¹ˆå°±è¦ä» <code>æ—¶é—´å±‚é¢</code> ä¸ <code>ä½“ç§¯å±‚é¢</code> å…¥æ‰‹ï¼Œå› ä¸ºè¿™ä¸¤æ–¹é¢æ˜¯æœ€ç›´æ¥å¯è§‚çš„ï¼Œæ— éœ€ä¿®æ”¹æºç æˆ–å¢åŠ æµç¨‹ï¼Œåˆ©ç”¨ <code>webpack</code> ä¸å…¶ä»–ç¬¬ä¸‰æ–¹åº”ç”¨æä¾›çš„å¤šå…ƒåŒ–é…ç½®å®Œæˆä¸Šè¿°æ“ä½œ</p><blockquote><p>æ³¨ï¼šâ± è¡¨ç¤ºå‡å°‘ <code>æ‰“åŒ…æ—¶é—´</code>ï¼ŒğŸ“¦ è¡¨ç¤ºå‡å°‘ <code>æ‰“åŒ…ä½“ç§¯</code></p></blockquote><p>æ€»ç»“ä¸‹æ¥å¤§æ¦‚æ˜¯ï¼š</p><ul><li>å‡å°‘æ‰“åŒ…æ—¶é—´ï¼š<code>ç¼©å‡èŒƒå›´</code>ã€<code>ç¼“å­˜å‰¯æœ¬</code>ã€<code>å®šå‘æœç´¢</code>ã€<code>æå‰æ„å»º</code>ã€<code>å¹¶è¡Œæ„å»º</code>ã€<code>å¯è§†ç»“æ„</code></li><li>å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼š<code>åˆ†å‰²ä»£ç </code>ã€<code>æ‘‡æ ‘ä¼˜åŒ–</code>ã€<code>åŠ¨æ€å«ç‰‡</code>ã€<code>æŒ‰éœ€åŠ è½½</code>ã€<code>ä½œç”¨æå‡</code>ã€<code>å‹ç¼©èµ„æº</code></li></ul><h2 id="å‡å°‘æ‰“åŒ…æ—¶é—´æ–¹æ¡ˆ" tabindex="-1">å‡å°‘æ‰“åŒ…æ—¶é—´æ–¹æ¡ˆ <a class="header-anchor" href="#å‡å°‘æ‰“åŒ…æ—¶é—´æ–¹æ¡ˆ" aria-hidden="true">#</a></h2><ol><li><p>â± ç¼©å‡æ‰“åŒ…èŒƒå›´</p><p>é…ç½® <code>include/exclude</code> ç¼©å° <code>Loader</code> å¯¹æ–‡ä»¶çš„æœç´¢èŒƒå›´ï¼Œå¥½å¤„æ˜¯é¿å…ä¸å¿…è¦çš„è½¬è¯‘ï¼ˆä¸€èˆ¬ <code>loader</code> éƒ½ä¼šæœ‰è¿™ä¸ªé…ç½®é¡¹ï¼‰</p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">/* å¿½ç•¥å¤„ç†çš„ç›®å½• */</span>
      include<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">/* åŒ…å«å¤„ç†çš„ç›®å½• */</span>
      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>â± ç¼“å­˜å‰¯æœ¬</p><p>é…ç½® <code>cache</code> ç¼“å­˜ <code>loader</code> å¯¹æ–‡ä»¶çš„ç¼–è¯‘å‰¯æœ¬ï¼Œå¥½å¤„æ˜¯ <code>å†æ¬¡ç¼–è¯‘æ—¶åªç¼–è¯‘å˜åŠ¨çš„æ–‡ä»¶</code>ã€‚<code>Loader/Plugin</code> å¯èƒ½ä¼šæä¾›ä¸€ä¸ªå¯ç”¨ç¼–è¯‘ç¼“å­˜çš„é€‰é¡¹ï¼Œé€šå¸¸åŒ…æ‹¬ <code>cache</code> å­—çœ¼ï¼Œä»¥ <code>babel-loader</code> ä¸ <code>eslint-webpack-plugin</code> ä¸ºä¾‹</p><div class="language-js"><pre><code><span class="token keyword">import</span> EslintPlugin <span class="token keyword">from</span> <span class="token string">&quot;eslint-webpack-plugin&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      include<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">src</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span> cacheDirectory<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">EslintPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> cache<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>â± å®šå‘æœç´¢</p><p>é…ç½® <code>resolve</code> æé«˜æ–‡ä»¶çš„æœç´¢æ•ˆç‡ï¼Œå¯ä»¥å®šå‘æŒ‡å®šæ‰€éœ€æ–‡ä»¶çš„è·¯å¾„ã€‚<code>alias</code> è¡¨ç¤ºæ˜ å°„è·¯å¾„ï¼Œ<code>extensions</code> è¡¨ç¤ºæ–‡ä»¶åç¼€ï¼Œ<code>noParse</code> è¡¨ç¤ºè¿‡æ»¤æ— ä¾èµ–æ–‡ä»¶ï¼›é€šå¸¸é…ç½® <code>alias</code> ä¸ <code>extensions</code> å°±è¶³å¤Ÿäº†</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">resolvePath</span> <span class="token operator">=</span> <span class="token parameter">relativePath</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> relativePath<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;@&quot;</span><span class="token operator">:</span> <span class="token function">resolvePath</span><span class="token punctuation">(</span><span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// ... others</span>
      swiper<span class="token operator">:</span> <span class="token string">&quot;swiper/js/swiper.min.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/* å¯¼å…¥æ¨¡å—çœç•¥åç¼€ */</span>
    extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.vue&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>â± æå‰æ„å»º</p><p>é…ç½® <code>DllPlugin</code> å°†ç¬¬ä¸‰æ–¹ä¾èµ–æå‰æ‰“åŒ…ï¼Œå¥½å¤„æ˜¯ <code>å°†DLLä¸ä¸šåŠ¡ä»£ç å®Œå…¨åˆ†ç¦»</code> ä¸”æ¯æ¬¡ <code>åªæ„å»ºä¸šåŠ¡ä»£ç </code>ï¼ˆå·²ä¸æ¨èä½¿ç”¨ï¼Œæ•…ä¸ä½œè¯´æ˜ï¼‰</p></li><li><p>â± å¹¶è¡Œæ„å»º</p><p>é…ç½® <code>Thread</code> å°† <code>Loader</code> å•è¿›ç¨‹è½¬æ¢ä¸ºå¤šè¿›ç¨‹ï¼Œ<code>é‡Šæ”¾CPUå¤šæ ¸å¹¶å‘çš„ä¼˜åŠ¿</code>ã€‚åœ¨ä½¿ç”¨ <code>webpack</code> æ„å»ºé¡¹ç›®æ—¶ä¼šæœ‰å¤§é‡æ–‡ä»¶éœ€è§£æä¸å¤„ç†ï¼Œéšç€æ–‡ä»¶å¢å¤šä¼šä½¿æ„å»ºè¿‡ç¨‹å˜å¾—è¶Šæ…¢</p><p>åœ¨ <code>Node</code> ä¸­è¿è¡Œçš„ <code>webpack</code> æ˜¯å•çº¿ç¨‹çš„ï¼Œç®€è€Œè¨€ä¹‹ï¼Œ<code>webpack</code> å¾…å¤„ç†çš„ä»»åŠ¡éœ€ä¸€ä»¶ä»¶å¤„ç†ï¼Œä¸èƒ½åŒä¸€æ—¶åˆ»å¤„ç†å¤šä»¶ä»»åŠ¡ã€‚ä½† <code>CPU</code> æ˜¯å¤šæ ¸çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ© <a href="https://github.com/webpack-contrib/thread-loader" target="_blank" rel="noopener noreferrer"><code>thread-loader ğŸ”—</code></a> æ¥æ ¹æ® <code>CPU</code> çš„æ ¸å¿ƒæ•°å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼ˆå½“ç„¶è¦è€ƒè™‘æ˜¯å¦æœ‰å¿…è¦å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œæ¯•ç«Ÿå¼€å¤šä¸ªçº¿ç¨‹ä¹Ÿæœ‰é¢å¤–å¼€é”€ï¼Œè‹¥å¤„ç†æ–‡ä»¶é‡å¹¶ä¸å¤§ï¼Œåˆ™ä¸æ¨èå¼€å¯å¤šçº¿ç¨‹ï¼‰</p><div class="language-js"><pre><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&#39;thread-loader&#39;</span>
          <span class="token comment">// your expensive loader (e.g babel-loader)</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">import</span> Os <span class="token keyword">from</span> <span class="token string">&quot;os&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      use<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;thread-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">/* ä½¿ç”¨ os æ¨¡å—è·å– cpu æ ¸å¿ƒæ•° */</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span> workers<span class="token operator">:</span> Os<span class="token punctuation">.</span><span class="token function">cpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span> cacheDirectory<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>â± å¯è§†ç»“æ„</p><p>é…ç½® <code>BundleAnalyzer</code> åˆ†ææ‰“åŒ…æ–‡ä»¶ç»“æ„ï¼Œé€šè¿‡åˆ†æåŸå› å¾—å‡ºä¼˜åŒ–æ–¹æ¡ˆå‡å°‘æ‰“åŒ…æ—¶é—´ã€‚<code>BundleAnalyzer</code>ï¼ˆ<a href="https://github.com/webpack-contrib/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer"><code>webpack-bundle-analyzer ğŸ”—</code></a>ï¼‰æ˜¯ <code>webpack</code> å®˜æ–¹æ’ä»¶ï¼Œå¯ç›´è§‚åˆ†ææ‰“åŒ…æ–‡ä»¶çš„æ¨¡å—ç»„æˆéƒ¨åˆ†ã€æ¨¡å—ä½“ç§¯å æ¯”ã€æ¨¡å—åŒ…æ‹¬å…³ç³»ã€æ¨¡å—ä¾èµ–å…³ç³»ã€æ–‡ä»¶æ˜¯å¦é‡å¤ã€å‹ç¼©ä½“ç§¯å¯¹æ¯”ç­‰å¯è§†åŒ–æ•°æ®</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BundleAnalyzerPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;webpack-bundle-analyzer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... others</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol><h2 id="å‡å°‘æ‰“åŒ…ä½“ç§¯æ–¹æ¡ˆ" tabindex="-1">å‡å°‘æ‰“åŒ…ä½“ç§¯æ–¹æ¡ˆ <a class="header-anchor" href="#å‡å°‘æ‰“åŒ…ä½“ç§¯æ–¹æ¡ˆ" aria-hidden="true">#</a></h2><ol><li><p>ğŸ“¦ åˆ†å‰²ä»£ç </p><p>åˆ†å‰²å„ä¸ªæ¨¡å—ä»£ç ï¼Œæå–ç›¸åŒéƒ¨åˆ†ä»£ç ï¼Œå‡å°‘é‡å¤ä»£ç çš„å‡ºç°é¢‘ç‡ã€‚<code>webpack v4+</code> ä½¿ç”¨ <code>splitChunks</code> æ›¿ä»£ <code>CommonsChunksPlugin</code> å®ç°ä»£ç åˆ†å‰²ï¼ˆè¯¦æƒ…å¯è§ <a href="https://webpack.docschina.org/configuration/optimization/#optimizationsplitchunks" target="_blank" rel="noopener noreferrer"><code>optimizationsplitchunks ğŸ”—</code></a></p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* æŠ½ç¦»WebpackRuntimeå‡½æ•° */</span>
    runtimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;manifest&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">/* ç¼“å­˜ */</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        common<span class="token operator">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">/* ä»£ç å—å‡ºç°æœ€å°‘æ¬¡æ•° */</span>
          name<span class="token operator">:</span> <span class="token string">&quot;common&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* ä»£ç å—åç§° */</span>
          priority<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">/* ä¼˜å…ˆçº§åˆ« */</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">/* é‡ç”¨å·²å­˜åœ¨ä»£ç å— */</span>
          test<span class="token operator">:</span> <span class="token function">AbsPath</span><span class="token punctuation">(</span><span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        vendor<span class="token operator">:</span> <span class="token punctuation">{</span>
          chunks<span class="token operator">:</span> <span class="token string">&quot;initial&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* ä»£ç åˆ†å‰²ç±»å‹ */</span>
          name<span class="token operator">:</span> <span class="token string">&quot;vendor&quot;</span><span class="token punctuation">,</span>
          priority<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/* ä»£ç åˆ†å‰²ç±»å‹ï¼šallå…¨éƒ¨æ¨¡å—ï¼Œasyncå¼‚æ­¥æ¨¡å—ï¼Œinitialå…¥å£æ¨¡å— */</span>
      chunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>ğŸ“¦ æ‘‡æ ‘ä¼˜åŒ–ï¼ˆ<code>Tree-shaking</code>ï¼‰</p><p>åˆ é™¤é¡¹ç›®ä¸­æœªè¢«å¼•ç”¨ä»£ç åŠé‡å¤ä»£ç ï¼Œç”±äº <code>Tree-shaking</code> ä»…é’ˆå¯¹é™æ€ç»“æ„åˆ†æï¼Œæ•…ä»… <code>ESM</code> æ¨¡å—åŒ–è§„èŒƒç”Ÿæ•ˆï¼Œå…¶ä»–è§„èŒƒï¼ˆæ¯”å¦‚ <code>commonjs</code> è§„èŒƒï¼‰å¹¶ä¸ä¼šç”Ÿæ•ˆ</p><p><code>webpack v5</code> çš„ <code>mode = &quot;production&quot;</code> çš„æƒ…å†µä¸‹ä¼šé»˜è®¤å¼€å¯ <code>Tree-shaking</code> åŠŸèƒ½ï¼Œä¸šåŠ¡ä»£ç åŒæ ·éœ€è¦ä½¿ç”¨ <code>ESM</code> æ¨¡å—åŒ–æ–¹å¼ç¼–å†™ï¼›<code>v2+</code> ç‰ˆæœ¬éœ€è¦é…ç½®é¢„è®¾ç¯å¢ƒä¸º <code>ESM</code></p><div class="language-js"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">/* set modules: false by default */</span>
              presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;env&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> modules<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><a class="link" href="https://github.com/suressk/edit/deploy/docs/knowledge/engineering/wpOptimize.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>Last Updated:</span><span class="datetime" data-v-5797b537></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/knowledge/engineering/lint" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>ä»£ç è§„èŒƒ</span></a></div><div class="next" data-v-38ede35f><!----></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"algorithm_index.md\":\"5272778e\",\"algorithm_summary_complexity.md\":\"02571a8b\",\"algorithm_summary_merge.md\":\"08cafcc3\",\"algorithm_summary_stack.md\":\"7566edaa\",\"index.md\":\"543b718e\",\"interview_index.md\":\"dba2ab33\",\"interview_summary_actual.md\":\"dcdca4d0\",\"interview_summary_basis.md\":\"04c9c1fc\",\"interview_summary_index.md\":\"2f676ee3\",\"interview_summary_internet.md\":\"aa7621d1\",\"interview_summary_optimization.md\":\"2a345c35\",\"interview_summary_strands.md\":\"98b58744\",\"knowledge_engineering_compare.md\":\"d1b77632\",\"knowledge_engineering_hotupdate.md\":\"bc8ddad5\",\"knowledge_engineering_lint.md\":\"e7cb63d2\",\"knowledge_engineering_loaderandplugin.md\":\"7a732532\",\"knowledge_engineering_tapable.md\":\"e8ecd38e\",\"knowledge_engineering_webpack.md\":\"2d0f9319\",\"knowledge_engineering_wpoptimize.md\":\"cc548111\",\"knowledge_index.md\":\"ac4f05b6\",\"knowledge_react_fiber.md\":\"7cffdfb5\",\"knowledge_react_index.md\":\"cdd5f612\",\"knowledge_study_algorithm.md\":\"e2cdb5e1\",\"knowledge_study_jseventloop.md\":\"5472800b\",\"knowledge_study_promise.md\":\"608b8249\",\"knowledge_study_vuenexttick.md\":\"6902025f\",\"knowledge_vite_esbuild.md\":\"030279f9\",\"knowledge_vite_index.md\":\"28d88adc\",\"knowledge_vite_plugin.md\":\"9ca220d9\",\"knowledge_vite_resolveconfig.md\":\"46f27785\",\"knowledge_vite_vitejs.md\":\"0a461184\",\"mood_autumn.md\":\"0d839ce5\",\"mood_chinaintheclassics.md\":\"8cd9edd9\",\"mood_dragonboatfestival.md\":\"ec001f45\",\"mood_fate.md\":\"380ecd53\",\"mood_feels.md\":\"2f90f811\",\"mood_index.md\":\"d3abdd4d\",\"mood_loneliness.md\":\"0f0e385c\",\"mood_spring.md\":\"56b947ad\",\"mood_wind.md\":\"64a8d8ef\",\"mood_yearend.md\":\"f9726d19\"}")</script>
    <script type="module" async src="/assets/app.e07e89a0.js"></script>
    
  </body>
</html>